{"version":3,"sources":["swap/utils/pubkeys.ts","swap/components/context/TokenList.tsx","swap/components/context/Dex.tsx","swap/components/context/Swap.tsx","swap/components/context/Mint.tsx","swap/utils/tokens.ts","swap/components/context/Token.tsx","swap/components/TokenDialog.tsx","swap/components/Settings.tsx","swap/components/Info.tsx","swap/components/Swap.tsx","swap/index.ts","App.tsx","reportWebVitals.ts","index.tsx"],"names":["SRM_MINT","PublicKey","USDC_MINT","USDT_MINT","DEX_PID","_TokenListContext","React","createContext","TokenListContextProvider","props","Provider","value","tokenList","children","useTokenList","ctx","useContext","Error","getList","_DexContext","DexContextProvider","useState","Map","ooAccounts","setOoAccounts","marketCache","setMarketCache","orderbookCache","setOrderbookCache","swapClient","useEffect","OpenOrders","findForOwner","program","provider","connection","wallet","publicKey","then","openOrders","a","newOoAccounts","markets","Set","forEach","oo","add","market","toString","get","push","set","size","anchor","getMultipleAccounts","map","m","marketAccounts","programAccount","account","Market","getLayout","decode","data","opts","newMarketCache","useDexContext","useOpenOrders","useMarket","asyncMarket","useAsync","undefined","load","marketClient","cache","result","useFair","orderbook","asyncOrderbook","Promise","all","loadBids","loadAsks","bids","asks","useOrderbook","bestBid","items","next","bestOffer","price","useRoute","fromMint","toMint","useMemo","route","_SwapContext","SwapContextProvider","setFromMint","setToMint","fromAmount","_setFromAmount","toAmount","_setToAmount","isClosingNewAccounts","setIsClosingNewAccounts","slippage","setSlippage","fairOverride","setFairOverride","fair","_useSwapFair","setFromAmount","amount","setToAmount","swapToFromMints","oldFrom","oldFromAmount","oldToAmount","useSwapContext","useSwapFair","fairRoute","fromFair","fromMarket","toFair","length","baseMintAddress","equals","useFairRoute","_MintContext","MintContextProvider","mintCache","setMintCache","useMint","mint","asyncMintInfo","mintClient","Token","TOKEN_PROGRAM_ID","Account","getMintInfo","mintInfo","filters","getOwnedAccountsFilters","_rpcRequest","toBase58","commitment","resp","error","message","pubkey","executable","owner","lamports","accountInfo","bs58","filter","every","dataSize","memcmp","filterBytes","bytes","slice","offset","parseTokenAccountData","ACCOUNT_LAYOUT","BufferLayout","BN","offsetOf","span","_TokenContext","TokenContextProvider","ownedTokenAccounts","setOwnedTokenAccounts","getOwnedTokenAccounts","useOwnedTokenAccount","tokenAccounts","sort","b","useStyles","makeStyles","dialogContent","paddingTop","textField","width","border","borderRadius","marginBottom","TokenDialog","open","onClose","setMint","tokenFilter","setTokenFilter","styles","Dialog","PaperProps","style","DialogTitle","fontWeight","DialogContent","className","TextField","placeholder","onChange","e","target","InputProps","disableUnderline","padding","List","disablePadding","tokens","concat","TokenListItem","onClick","ListItem","button","TokenIcon","TokenName","tokenInfo","t","address","marginLeft","Typography","symbol","color","fontSize","name","theme","tab","table","settingsButton","closeAccountSwitchLabel","palette","text","secondary","SettingsButton","variant","popupState","IconButton","bindTrigger","Popover","bindPopover","anchorOrigin","vertical","horizontal","transformOrigin","SettingsDetails","showSettingsDialog","setShowSettingsDialog","marginTop","type","parseFloat","display","justifyContent","flexDirection","endAdornment","InputAdornment","position","marginRight","flex","disabled","ToggleButton","selected","console","paddingBottom","paddingLeft","paddingRight","CloseNewAccountsSwitch","Button","background","SettingsDialog","FormGroup","row","FormControlLabel","classes","label","labelPlacement","control","Switch","checked","maxWidth","height","right","top","Close","OpenOrdersAccounts","TableContainer","component","Paper","elevation","Table","aria-label","TableHead","TableRow","TableCell","align","TableBody","Array","from","entries","oos","OpenOrdersRow","ooAccount","setOoAccount","base","quote","quoteMintAddress","baseWallet","quoteWallet","baseTicker","quoteTicker","marketName","settleDisabled","baseTokenFree","toNumber","quoteTokenFree","closeDisabled","baseTokenTotal","quoteTokenTotal","settleFunds","makeSettleFundsTransaction","transaction","signers","send","closeOpenOrders","scope","Link","href","rel","Select","MenuItem","toDisplay","sub","decimals","toFixed","infoLabel","fairPriceLabel","infoButton","InfoLabel","fromMintInfo","fromTokenInfo","toTokenInfo","InfoButton","Info","disableRestoreFocus","InfoDetails","fromMintTicker","toMintTicker","addresses","ticker","MarketRoute","overflow","useMarketName","card","cardContent","swapButton","swapToFromButton","SwapCard","Card","SwapHeader","SwapFromForm","ArrowButton","SwapToForm","SwapButton","margin","SwapTokenForm","setAmount","showTokenDialog","setShowTokenDialog","tokenAccount","mintAccount","TokenButton","ExpandMore","logoURI","alt","src","toMintInfo","toMarket","sendSwapTransaction","muln","minExpectedSwapAmount","fromOpenOrders","toOpenOrders","swap","close","Swap","SwapClient","AppInner","enqueueSnackbar","useSnackbar","params","setParams","isConnected","setIsConnected","preflightCommitment","network","Wallet","Connection","NotifyingProvider","tx","action","TokenListProvider","resolve","connect","on","textAlign","onTransaction","txSig","this","App","left","bottom","maxSnack","autoHideDuration","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.f6878418.chunk.js","sourcesContent":["import { PublicKey } from \"@solana/web3.js\";\n\nexport const SRM_MINT = new PublicKey(\n  \"SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt\"\n);\n\nexport const USDC_MINT = new PublicKey(\n  \"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v\"\n);\n\nexport const USDT_MINT = new PublicKey(\n  \"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\"\n);\n\nexport const DEX_PID = new PublicKey(\n  \"9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin\"\n);\n","import React, { useContext } from \"react\";\nimport { TokenListContainer, TokenInfo } from \"@solana/spl-token-registry\";\n\nconst _TokenListContext = React.createContext<null | TokenListContext>(null);\n\nexport function TokenListContextProvider(props: any) {\n  return (\n    <_TokenListContext.Provider value={{ tokenList: props.tokenList }}>\n      {props.children}\n    </_TokenListContext.Provider>\n  );\n}\n\ntype TokenListContext = {\n  tokenList: TokenListContainer;\n};\n\nexport function useTokenList(): TokenInfo[] {\n  const ctx = useContext(_TokenListContext);\n  if (ctx === null) {\n    throw new Error(\"Context not available\");\n  }\n  return ctx.tokenList.getList();\n}\n","import React, { useContext, useState, useEffect, useMemo } from \"react\";\nimport { useAsync } from \"react-async-hook\";\nimport * as anchor from \"@project-serum/anchor\";\nimport { Swap as SwapClient } from \"@project-serum/swap\";\nimport {\n  Market,\n  OpenOrders,\n  Orderbook as OrderbookSide,\n} from \"@project-serum/serum\";\nimport { PublicKey } from \"@solana/web3.js\";\nimport { DEX_PID } from \"../../utils/pubkeys\";\nimport { useTokenList } from \"./TokenList\";\n\ntype DexContext = {\n  // Maps market address to open orders accounts.\n  openOrders: Map<string, Array<OpenOrders>>;\n  marketCache: Map<string, Market>;\n  setMarketCache: (c: Map<string, Market>) => void;\n  orderbookCache: Map<string, Orderbook>;\n  setOrderbookCache: (c: Map<string, Orderbook>) => void;\n  swapClient: SwapClient;\n};\nconst _DexContext = React.createContext<DexContext | null>(null);\n\nexport function DexContextProvider(props: any) {\n  const [ooAccounts, setOoAccounts] = useState<Map<string, Array<OpenOrders>>>(\n    new Map()\n  );\n  const [marketCache, setMarketCache] = useState<Map<string, Market>>(\n    new Map()\n  );\n  const [orderbookCache, setOrderbookCache] = useState<Map<string, Orderbook>>(\n    new Map()\n  );\n  const swapClient = props.swapClient;\n\n  // Two operations:\n  //\n  // 1. Fetch all open orders accounts for the connected wallet.\n  // 2. Batch fetch all market accounts for those open orders.\n  //\n  useEffect(() => {\n    OpenOrders.findForOwner(\n      swapClient.program.provider.connection,\n      swapClient.program.provider.wallet.publicKey,\n      DEX_PID\n    ).then(async (openOrders) => {\n      const newOoAccounts = new Map();\n      let markets = new Set<string>();\n      openOrders.forEach((oo) => {\n        markets.add(oo.market.toString());\n        if (newOoAccounts.get(oo.market.toString())) {\n          newOoAccounts.get(oo.market.toString()).push(oo);\n        } else {\n          newOoAccounts.set(oo.market.toString(), [oo]);\n        }\n      });\n      if (markets.size > 100) {\n        // Punt request chunking until there's user demand.\n        throw new Error(\n          \"Too many markets. Please file an issue to update this\"\n        );\n      }\n      const marketAccounts = (\n        await anchor.utils.getMultipleAccounts(\n          swapClient.program.provider.connection,\n          // @ts-ignore\n          [...markets].map((m) => new PublicKey(m))\n        )\n      ).map((programAccount) => {\n        return {\n          publicKey: programAccount?.publicKey,\n          account: new Market(\n            Market.getLayout(DEX_PID).decode(programAccount?.account.data),\n            -1, // Not used so don't bother fetching.\n            -1, // Not used so don't bother fetching.\n            swapClient.program.provider.opts,\n            DEX_PID\n          ),\n        };\n      });\n      setMarketCache((marketCache) => {\n        const newMarketCache = new Map(marketCache);\n        marketAccounts.forEach((m) => {\n          newMarketCache.set(m.publicKey!.toString(), m.account);\n        });\n        return newMarketCache;\n      });\n      setOoAccounts(newOoAccounts);\n    });\n  }, [\n    swapClient.program.provider.connection,\n    swapClient.program.provider.wallet.publicKey,\n    swapClient.program.provider.opts,\n  ]);\n  return (\n    <_DexContext.Provider\n      value={{\n        openOrders: ooAccounts,\n        marketCache,\n        setMarketCache,\n        orderbookCache,\n        setOrderbookCache,\n        swapClient,\n      }}\n    >\n      {props.children}\n    </_DexContext.Provider>\n  );\n}\n\nexport function useDexContext(): DexContext {\n  const ctx = useContext(_DexContext);\n  if (ctx === null) {\n    throw new Error(\"Context not available\");\n  }\n  return ctx;\n}\n\nexport function useOpenOrders(): Map<string, Array<OpenOrders>> {\n  const ctx = useDexContext();\n  return ctx.openOrders;\n}\n\n// Lazy load a given market.\nexport function useMarket(market?: PublicKey): Market | undefined {\n  const ctx = useDexContext();\n\n  const asyncMarket = useAsync(async () => {\n    if (!market) {\n      return undefined;\n    }\n    if (ctx.marketCache.get(market.toString())) {\n      return ctx.marketCache.get(market.toString());\n    }\n    const marketClient = await Market.load(\n      ctx.swapClient.program.provider.connection,\n      market,\n      undefined,\n      DEX_PID\n    );\n\n    let cache = new Map(ctx.marketCache);\n    cache.set(market.toString(), marketClient);\n    ctx.setMarketCache(cache);\n\n    return marketClient;\n  }, [ctx.swapClient.program.provider.connection, market]);\n\n  if (asyncMarket.result) {\n    return asyncMarket.result;\n  }\n\n  return undefined;\n}\n\n// Lazy load the orderbook for a given market.\nexport function useOrderbook(market?: PublicKey): Orderbook | undefined {\n  const { swapClient, orderbookCache, setOrderbookCache } = useDexContext();\n  const marketClient = useMarket(market);\n\n  const asyncOrderbook = useAsync(async () => {\n    if (!market || !marketClient) {\n      return undefined;\n    }\n    if (orderbookCache.get(market.toString())) {\n      return orderbookCache.get(market.toString());\n    }\n\n    const [bids, asks] = await Promise.all([\n      marketClient.loadBids(swapClient.program.provider.connection),\n      marketClient.loadAsks(swapClient.program.provider.connection),\n    ]);\n\n    const orderbook = {\n      bids,\n      asks,\n    };\n\n    const cache = new Map(orderbookCache);\n    cache.set(market.toString(), orderbook);\n    setOrderbookCache(cache);\n\n    return orderbook;\n  }, [swapClient.program.provider.connection, market, marketClient]);\n\n  if (asyncOrderbook.result) {\n    return asyncOrderbook.result;\n  }\n\n  return undefined;\n}\n\nexport function useMarketName(market: PublicKey): string {\n  const tokenList = useTokenList();\n  const marketClient = useMarket(market);\n  const baseTicker = tokenList\n    .filter((t) => t.address === marketClient?.baseMintAddress.toString())\n    .map((t) => t.symbol)[0];\n  const quoteTicker = tokenList\n    .filter((t) => t.address === marketClient?.quoteMintAddress.toString())\n    .map((t) => t.symbol)[0];\n  const name = `${baseTicker} / ${quoteTicker}`;\n  return name;\n}\n\n// Fair price for a given market, as defined by the mid.\nexport function useFair(market?: PublicKey): number | undefined {\n  const orderbook = useOrderbook(market);\n  if (orderbook === undefined) {\n    return undefined;\n  }\n  const bestBid = orderbook.bids.items(true).next().value;\n  const bestOffer = orderbook.asks.items(false).next().value;\n  const mid = (bestBid.price + bestOffer.price) / 2.0;\n  return mid;\n}\n\n// Fair price for a theoretical toMint/fromMint market. I.e., the number\n// of `fromMint` tokens to purchase a single `toMint` token. Aggregates\n// across a trade route, if needed.\nexport function useFairRoute(\n  fromMint: PublicKey,\n  toMint: PublicKey\n): number | undefined {\n  const route = useRoute(fromMint, toMint);\n  const fromFair = useFair(route[0]);\n  const fromMarket = useMarket(route[0]);\n  const toFair = useFair(route[1]);\n\n  if (route.length === 1 && fromFair !== undefined) {\n    if (fromMarket === undefined) {\n      return undefined;\n    }\n    if (fromMarket?.baseMintAddress.equals(fromMint)) {\n      return 1.0 / fromFair;\n    } else {\n      return fromFair;\n    }\n  }\n  if (fromFair === undefined || toFair === undefined) {\n    return undefined;\n  }\n  return toFair / fromFair;\n}\n\nexport function useRoute(\n  fromMint: PublicKey,\n  toMint: PublicKey\n): Array<PublicKey> {\n  const { swapClient } = useDexContext();\n  return useMemo(\n    () => swapClient.route(fromMint, toMint),\n    [swapClient, fromMint, toMint]\n  );\n}\n\ntype Orderbook = {\n  bids: OrderbookSide;\n  asks: OrderbookSide;\n};\n","import React, { useContext, useState } from \"react\";\nimport { PublicKey } from \"@solana/web3.js\";\nimport { SRM_MINT, USDC_MINT } from \"../../utils/pubkeys\";\nimport { useFairRoute } from \"./Dex\";\n\nconst DEFAULT_SLIPPAGE_PERCENT = 0.5;\n\nexport type SwapContext = {\n  // Mint being traded from. The user must own these tokens.\n  fromMint: PublicKey;\n  setFromMint: (m: PublicKey) => void;\n\n  // Mint being traded to. The user will receive these tokens after the swap.\n  toMint: PublicKey;\n  setToMint: (m: PublicKey) => void;\n\n  // Amount used for the swap.\n  fromAmount: number;\n  setFromAmount: (a: number) => void;\n\n  // *Expected* amount received from the swap.\n  toAmount: number;\n  setToAmount: (a: number) => void;\n\n  // Function to flip what we consider to be the \"to\" and \"from\" mints.\n  swapToFromMints: () => void;\n\n  // The amount (in units of percent) a swap can be off from the estimate\n  // shown to the user.\n  slippage: number;\n  setSlippage: (n: number) => void;\n\n  // Null if the user is using fairs directly from DEX prices.\n  // Otherwise, a user specified override for the price to use when calculating\n  // swap amounts.\n  fairOverride: number | null;\n  setFairOverride: (n: number | null) => void;\n\n  // True if all newly created market accounts should be closed in the\n  // same user flow (ideally in the same transaction).\n  isClosingNewAccounts: boolean;\n  setIsClosingNewAccounts: (b: boolean) => void;\n};\nconst _SwapContext = React.createContext<null | SwapContext>(null);\n\nexport function SwapContextProvider(props: any) {\n  const [fromMint, setFromMint] = useState(SRM_MINT);\n  const [toMint, setToMint] = useState(USDC_MINT);\n  const [fromAmount, _setFromAmount] = useState(0);\n  const [toAmount, _setToAmount] = useState(0);\n  const [isClosingNewAccounts, setIsClosingNewAccounts] = useState(false);\n  // Percent units.\n  const [slippage, setSlippage] = useState(DEFAULT_SLIPPAGE_PERCENT);\n  const [fairOverride, setFairOverride] = useState<number | null>(null);\n  const fair = _useSwapFair(fromMint, toMint, fairOverride);\n\n  const swapToFromMints = () => {\n    const oldFrom = fromMint;\n    const oldFromAmount = fromAmount;\n    const oldTo = toMint;\n    const oldToAmount = toAmount;\n    setFromMint(oldTo);\n    setToMint(oldFrom);\n    _setFromAmount(oldToAmount);\n    _setToAmount(oldFromAmount);\n  };\n\n  const setFromAmount = (amount: number) => {\n    if (fair === undefined) {\n      throw new Error(\"Fair price not found\");\n    }\n    _setFromAmount(amount);\n    _setToAmount(amount / fair);\n  };\n\n  const setToAmount = (amount: number) => {\n    if (fair === undefined) {\n      throw new Error(\"Fair price not found\");\n    }\n    _setToAmount(amount);\n    _setFromAmount(amount * fair);\n  };\n\n  return (\n    <_SwapContext.Provider\n      value={{\n        fromMint,\n        setFromMint,\n        toMint,\n        setToMint,\n        fromAmount,\n        setFromAmount,\n        toAmount,\n        setToAmount,\n        swapToFromMints,\n        slippage,\n        setSlippage,\n        fairOverride,\n        setFairOverride,\n        isClosingNewAccounts,\n        setIsClosingNewAccounts,\n      }}\n    >\n      {props.children}\n    </_SwapContext.Provider>\n  );\n}\n\nexport function useSwapContext(): SwapContext {\n  const ctx = useContext(_SwapContext);\n  if (ctx === null) {\n    throw new Error(\"Context not available\");\n  }\n  return ctx;\n}\n\nexport function useSwapFair(): number | undefined {\n  const { fairOverride, fromMint, toMint } = useSwapContext();\n  return _useSwapFair(fromMint, toMint, fairOverride);\n}\n\nfunction _useSwapFair(\n  fromMint: PublicKey,\n  toMint: PublicKey,\n  fairOverride: number | null\n): number | undefined {\n  const fairRoute = useFairRoute(fromMint, toMint);\n  const fair = fairOverride === null ? fairRoute : fairOverride;\n  return fair;\n}\n","import React, { useContext, useState } from \"react\";\nimport { useAsync } from \"react-async-hook\";\nimport { Provider } from \"@project-serum/anchor\";\nimport { PublicKey, Account } from \"@solana/web3.js\";\nimport { MintInfo, Token, TOKEN_PROGRAM_ID } from \"@solana/spl-token\";\n\nconst _MintContext = React.createContext<null | MintContext>(null);\ntype MintContext = {\n  mintCache: Map<string, MintInfo>;\n  setMintCache: (m: Map<string, MintInfo>) => void;\n  provider: Provider;\n};\n\nexport function MintContextProvider(props: any) {\n  const provider = props.provider;\n  const [mintCache, setMintCache] = useState(new Map<string, MintInfo>());\n\n  return (\n    <_MintContext.Provider\n      value={{\n        mintCache,\n        setMintCache,\n        provider,\n      }}\n    >\n      {props.children}\n    </_MintContext.Provider>\n  );\n}\n\nexport function useMint(mint?: PublicKey): MintInfo | undefined | null {\n  const ctx = useContext(_MintContext);\n  if (ctx === null) {\n    throw new Error(\"Mint context not found\");\n  }\n\n  // Lazy load the mint account if needeed.\n  const asyncMintInfo = useAsync(async () => {\n    if (!mint) {\n      return undefined;\n    }\n    if (ctx.mintCache.get(mint.toString())) {\n      return ctx.mintCache.get(mint.toString());\n    }\n    const mintClient = new Token(\n      ctx.provider.connection,\n      mint,\n      TOKEN_PROGRAM_ID,\n      new Account()\n    );\n    const mintInfo = await mintClient.getMintInfo();\n\n    let cache = new Map(ctx.mintCache);\n    cache.set(mint.toString(), mintInfo);\n    ctx.setMintCache(cache);\n\n    return mintInfo;\n  }, [ctx.provider.connection, mint]);\n\n  if (asyncMintInfo.result) {\n    return asyncMintInfo.result;\n  }\n  return undefined;\n}\n","// TODO: replace this whole file with something more modern. This is all copied\n//       from sollet.\n\nimport * as BufferLayout from \"buffer-layout\";\nimport { BN } from \"@project-serum/anchor\";\nimport { TOKEN_PROGRAM_ID } from \"@solana/spl-token\";\nimport { Connection, PublicKey } from \"@solana/web3.js\";\nimport * as bs58 from \"bs58\";\n\nexport async function getOwnedTokenAccounts(\n  connection: Connection,\n  publicKey: PublicKey\n) {\n  let filters = getOwnedAccountsFilters(publicKey);\n  // @ts-ignore\n  let resp = await connection._rpcRequest(\"getProgramAccounts\", [\n    TOKEN_PROGRAM_ID.toBase58(),\n    {\n      commitment: connection.commitment,\n      filters,\n    },\n  ]);\n  if (resp.error) {\n    throw new Error(\n      \"failed to get token accounts owned by \" +\n        publicKey.toBase58() +\n        \": \" +\n        resp.error.message\n    );\n  }\n  return resp.result\n    .map(({ pubkey, account: { data, executable, owner, lamports } }: any) => ({\n      publicKey: new PublicKey(pubkey),\n      accountInfo: {\n        data: bs58.decode(data),\n        executable,\n        owner: new PublicKey(owner),\n        lamports,\n      },\n    }))\n    .filter(({ accountInfo }: any) => {\n      // TODO: remove this check once mainnet is updated\n      return filters.every((filter) => {\n        if (filter.dataSize) {\n          return accountInfo.data.length === filter.dataSize;\n        } else if (filter.memcmp) {\n          let filterBytes = bs58.decode(filter.memcmp.bytes);\n          return accountInfo.data\n            .slice(\n              filter.memcmp.offset,\n              filter.memcmp.offset + filterBytes.length\n            )\n            .equals(filterBytes);\n        }\n        return false;\n      });\n    })\n    .map(({ publicKey, accountInfo }: any) => {\n      return { publicKey, account: parseTokenAccountData(accountInfo.data) };\n    });\n}\n\nexport const ACCOUNT_LAYOUT = BufferLayout.struct([\n  BufferLayout.blob(32, \"mint\"),\n  BufferLayout.blob(32, \"owner\"),\n  BufferLayout.nu64(\"amount\"),\n  BufferLayout.blob(93),\n]);\n\nexport const MINT_LAYOUT = BufferLayout.struct([\n  BufferLayout.blob(44),\n  BufferLayout.u8(\"decimals\"),\n  BufferLayout.blob(37),\n]);\n\nexport function parseTokenAccountData(data: Buffer) {\n  // @ts-ignore\n  let { mint, owner, amount } = ACCOUNT_LAYOUT.decode(data);\n  return {\n    mint: new PublicKey(mint),\n    owner: new PublicKey(owner),\n    amount: new BN(amount),\n  };\n}\n\nexport function parseMintData(data: Buffer) {\n  // @ts-ignore\n  let { decimals } = MINT_LAYOUT.decode(data);\n  return { decimals };\n}\n\nfunction getOwnedAccountsFilters(publicKey: PublicKey) {\n  return [\n    {\n      memcmp: {\n        // @ts-ignore\n        offset: ACCOUNT_LAYOUT.offsetOf(\"owner\"),\n        bytes: publicKey.toBase58(),\n      },\n    },\n    {\n      dataSize: ACCOUNT_LAYOUT.span,\n    },\n  ];\n}\n","import React, { useContext, useState, useEffect } from \"react\";\nimport { PublicKey } from \"@solana/web3.js\";\nimport { AccountInfo as TokenAccount } from \"@solana/spl-token\";\nimport { getOwnedTokenAccounts } from \"../../utils/tokens\";\n\nconst _TokenContext = React.createContext<TokenContext | null>(null);\n\nexport function TokenContextProvider(props: any) {\n  const provider = props.provider;\n  const [ownedTokenAccounts, setOwnedTokenAccounts] = useState(undefined);\n\n  // Fetch all the owned token accounts for the wallet.\n  useEffect(() => {\n    getOwnedTokenAccounts(provider.connection, provider.wallet.publicKey).then(\n      setOwnedTokenAccounts\n    );\n  }, [provider.wallet.publicKey, provider.connection]);\n\n  return (\n    <_TokenContext.Provider\n      value={{\n        ownedTokenAccounts,\n      }}\n    >\n      {props.children}\n    </_TokenContext.Provider>\n  );\n}\n\nexport type TokenContext = {\n  ownedTokenAccounts:\n    | { publicKey: PublicKey; account: TokenAccount }[]\n    | undefined;\n};\n\n// Null => none exists.\n// Undefined => loading.\nexport function useOwnedTokenAccount(\n  mint?: PublicKey\n): { publicKey: PublicKey; account: TokenAccount } | null | undefined {\n  const ctx = useContext(_TokenContext);\n  if (ctx === null) {\n    throw new Error(\"Context not available\");\n  }\n  if (mint === undefined) {\n    return mint;\n  }\n  if (ctx.ownedTokenAccounts === undefined) {\n    return undefined;\n  }\n  const tokenAccounts = ctx.ownedTokenAccounts.filter((account) =>\n    account.account.mint.equals(mint)\n  );\n\n  if (tokenAccounts.length === 0) {\n    return null;\n  }\n\n  // Take the account with the most tokens in it.\n  tokenAccounts.sort((a, b) =>\n    a.account.amount < b.account.amount\n      ? -1\n      : a.account.amount > b.account.amount\n      ? 1\n      : 0\n  );\n  return tokenAccounts[0];\n}\n","import { useState } from \"react\";\nimport { PublicKey } from \"@solana/web3.js\";\nimport {\n  makeStyles,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  TextField,\n  List,\n  ListItem,\n  Typography,\n} from \"@material-ui/core\";\nimport { TokenIcon } from \"./Swap\";\nimport { useDexContext } from \"./context/Dex\";\nimport { useTokenList } from \"./context/TokenList\";\nimport { USDC_MINT, USDT_MINT } from \"../utils/pubkeys\";\n\nconst useStyles = makeStyles(() => ({\n  dialogContent: {\n    paddingTop: 0,\n  },\n  textField: {\n    width: \"100%\",\n    border: \"solid 1pt #ccc\",\n    borderRadius: \"10px\",\n    marginBottom: \"8px\",\n  },\n}));\n\nexport default function TokenDialog({\n  open,\n  onClose,\n  setMint,\n}: {\n  open: boolean;\n  onClose: () => void;\n  setMint: (mint: PublicKey) => void;\n}) {\n  const [tokenFilter, setTokenFilter] = useState(\"\");\n  const styles = useStyles();\n  const { swapClient } = useDexContext();\n  return (\n    <Dialog\n      open={open}\n      onClose={onClose}\n      PaperProps={{\n        style: {\n          borderRadius: \"10px\",\n        },\n      }}\n    >\n      <div style={{ width: \"420px\" }}>\n        <DialogTitle style={{ fontWeight: \"bold\" }}>Select a token</DialogTitle>\n        <DialogContent className={styles.dialogContent}>\n          <TextField\n            className={styles.textField}\n            placeholder={\"Search name\"}\n            value={tokenFilter}\n            onChange={(e) => setTokenFilter(e.target.value)}\n            InputProps={{\n              disableUnderline: true,\n              style: { padding: \"10px\" },\n            }}\n          />\n          <div>\n            <List disablePadding>\n              {swapClient\n                .tokens()\n                .concat([USDC_MINT, USDT_MINT])\n                .map((mint) => (\n                  <TokenListItem\n                    key={mint.toString()}\n                    mint={mint}\n                    onClick={(mint) => {\n                      setMint(mint);\n                      onClose();\n                    }}\n                  />\n                ))}\n            </List>\n          </div>\n        </DialogContent>\n      </div>\n    </Dialog>\n  );\n}\n\nfunction TokenListItem({\n  mint,\n  onClick,\n}: {\n  mint: PublicKey;\n  onClick: (mint: PublicKey) => void;\n}) {\n  return (\n    <ListItem button onClick={() => onClick(mint)}>\n      <TokenIcon mint={mint} style={{ width: \"30px\", borderRadius: \"15px\" }} />\n      <TokenName mint={mint} />\n    </ListItem>\n  );\n}\n\nfunction TokenName({ mint }: { mint: PublicKey }) {\n  const tokenList = useTokenList();\n  let tokenInfo = tokenList.filter((t) => t.address === mint.toString())[0];\n  return (\n    <div style={{ marginLeft: \"16px\" }}>\n      <Typography style={{ fontWeight: \"bold\" }}>{tokenInfo.symbol}</Typography>\n      <Typography color=\"textSecondary\" style={{ fontSize: \"14px\" }}>\n        {tokenInfo.name}\n      </Typography>\n    </div>\n  );\n}\n","import { useState } from \"react\";\nimport { PublicKey } from \"@solana/web3.js\";\nimport { MintInfo } from \"@solana/spl-token\";\nimport { BN } from \"@project-serum/anchor\";\nimport { OpenOrders } from \"@project-serum/serum\";\nimport {\n  makeStyles,\n  Dialog,\n  DialogContent,\n  Paper,\n  Table,\n  TableRow,\n  TableHead,\n  TableCell,\n  TableBody,\n  TableContainer,\n  Popover,\n  IconButton,\n  Typography,\n  Button,\n  Select,\n  MenuItem,\n  TextField,\n  InputAdornment,\n  Link,\n  Switch,\n  FormControlLabel,\n  FormGroup,\n} from \"@material-ui/core\";\nimport { ToggleButton } from \"@material-ui/lab\";\nimport { SettingsOutlined as Settings, Close } from \"@material-ui/icons\";\nimport PopupState, { bindTrigger, bindPopover } from \"material-ui-popup-state\";\nimport { useSwapContext, useSwapFair } from \"./context/Swap\";\nimport { useMarket, useOpenOrders, useDexContext } from \"./context/Dex\";\nimport { useTokenList } from \"./context/TokenList\";\nimport { useMint } from \"./context/Mint\";\nimport { useOwnedTokenAccount } from \"./context/Token\";\n\nconst useStyles = makeStyles((theme) => ({\n  tab: {\n    width: \"50%\",\n  },\n  table: {},\n  settingsButton: {\n    padding: 0,\n  },\n  closeAccountSwitchLabel: {\n    color: theme.palette.text.secondary,\n  },\n}));\n\nexport function SettingsButton() {\n  const styles = useStyles();\n\n  return (\n    <PopupState variant=\"popover\">\n      {\n        //@ts-ignore\n        (popupState) => (\n          <div>\n            <IconButton\n              {...bindTrigger(popupState)}\n              className={styles.settingsButton}\n            >\n              <Settings />\n            </IconButton>\n            <Popover\n              {...bindPopover(popupState)}\n              anchorOrigin={{\n                vertical: \"bottom\",\n                horizontal: \"left\",\n              }}\n              transformOrigin={{\n                vertical: \"top\",\n                horizontal: \"right\",\n              }}\n              PaperProps={{ style: { borderRadius: \"10px\" } }}\n            >\n              <SettingsDetails />\n            </Popover>\n          </div>\n        )\n      }\n    </PopupState>\n  );\n}\n\nfunction SettingsDetails() {\n  const { slippage, setSlippage, fairOverride, setFairOverride } =\n    useSwapContext();\n  const [showSettingsDialog, setShowSettingsDialog] = useState(false);\n  const fair = useSwapFair();\n  return (\n    <div style={{ padding: \"15px\", width: \"305px\" }}>\n      <Typography color=\"textSecondary\" style={{ fontWeight: \"bold\" }}>\n        Settings\n      </Typography>\n      <div style={{ marginTop: \"10px\" }}>\n        <div>\n          <Typography color=\"textSecondary\">Slippage tolerance</Typography>\n          <TextField\n            type=\"number\"\n            placeholder=\"Error tolerance percentage\"\n            value={slippage}\n            onChange={(e) => setSlippage(parseFloat(e.target.value))}\n            style={{\n              display: \"flex\",\n              justifyContent: \"center\",\n              flexDirection: \"column\",\n            }}\n            InputProps={{\n              endAdornment: <InputAdornment position=\"end\">%</InputAdornment>,\n            }}\n          />\n        </div>\n        <div style={{ marginTop: \"5px\" }}>\n          <Typography color=\"textSecondary\">Fair price</Typography>\n          <div style={{ display: \"flex\" }}>\n            <TextField\n              type=\"number\"\n              placeholder=\"Fair price override\"\n              value={fair}\n              onChange={(e) => setFairOverride(parseFloat(e.target.value))}\n              style={{\n                marginRight: \"10px\",\n                flex: 1,\n                display: \"flex\",\n                justifyContent: \"center\",\n                flexDirection: \"column\",\n              }}\n              disabled={fairOverride === null}\n            />\n            <ToggleButton\n              value=\"bold\"\n              selected={fairOverride === null}\n              onClick={() => {\n                if (fair === undefined) {\n                  console.error(\"Fair is undefined\");\n                  return;\n                }\n                if (fairOverride === null) {\n                  setFairOverride(fair);\n                } else {\n                  setFairOverride(null);\n                }\n              }}\n              style={{\n                paddingTop: \"3px\",\n                paddingBottom: \"3px\",\n                paddingLeft: \"5px\",\n                paddingRight: \"5px\",\n                borderRadius: \"20px\",\n              }}\n            >\n              Auto\n            </ToggleButton>\n          </div>\n        </div>\n        <div style={{ marginTop: \"5px\" }}>\n          <CloseNewAccountsSwitch />\n        </div>\n        <Button\n          style={{\n            width: \"100%\",\n            marginTop: \"10px\",\n            background: \"#e0e0e0\",\n          }}\n          onClick={() => setShowSettingsDialog(true)}\n        >\n          Manage Dex Accounts\n        </Button>\n      </div>\n      <SettingsDialog\n        open={showSettingsDialog}\n        onClose={() => setShowSettingsDialog(false)}\n      />\n    </div>\n  );\n}\n\nfunction CloseNewAccountsSwitch() {\n  const styles = useStyles();\n  const { isClosingNewAccounts, setIsClosingNewAccounts } = useSwapContext();\n\n  return (\n    <FormGroup row>\n      <FormControlLabel\n        classes={{ label: styles.closeAccountSwitchLabel }}\n        labelPlacement=\"start\"\n        style={{\n          display: \"flex\",\n          justifyContent: \"space-between\",\n          marginLeft: 0,\n          width: \"100%\",\n        }}\n        control={\n          <Switch\n            checked={isClosingNewAccounts}\n            onChange={() => setIsClosingNewAccounts(!isClosingNewAccounts)}\n            color=\"primary\"\n          />\n        }\n        label=\"Close new accounts\"\n      />\n    </FormGroup>\n  );\n}\n\nexport function SettingsDialog({\n  open,\n  onClose,\n}: {\n  open: boolean;\n  onClose: () => void;\n}) {\n  return (\n    <Dialog\n      maxWidth=\"lg\"\n      open={open}\n      onClose={onClose}\n      PaperProps={{\n        style: {\n          borderRadius: \"10px\",\n        },\n      }}\n    >\n      <div>\n        <div\n          style={{\n            height: \"24px\",\n            display: \"flex\",\n            justifyContent: \"space-between\",\n          }}\n        >\n          <IconButton\n            onClick={onClose}\n            style={{\n              padding: 0,\n              position: \"absolute\",\n              right: \"8px\",\n              top: \"8px\",\n            }}\n          >\n            <Close />\n          </IconButton>\n        </div>\n        <DialogContent style={{ paddingTop: 0 }}>\n          <OpenOrdersAccounts />\n        </DialogContent>\n      </div>\n    </Dialog>\n  );\n}\n\nfunction OpenOrdersAccounts() {\n  const styles = useStyles();\n  const openOrders = useOpenOrders();\n  return (\n    <TableContainer component={Paper} elevation={0}>\n      <Table className={styles.table} aria-label=\"simple table\">\n        <TableHead>\n          <TableRow>\n            <TableCell>Market</TableCell>\n            <TableCell align=\"center\">Open Orders Account</TableCell>\n            <TableCell align=\"center\">Base Used</TableCell>\n            <TableCell align=\"center\">Base Free</TableCell>\n            <TableCell align=\"center\">Quote Used</TableCell>\n            <TableCell align=\"center\">Quote Free</TableCell>\n            <TableCell align=\"center\">Settle</TableCell>\n            <TableCell align=\"center\">Close</TableCell>\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          {Array.from(openOrders.entries()).map(([market, oos]) => {\n            return (\n              <OpenOrdersRow\n                key={market}\n                market={new PublicKey(market)}\n                openOrders={oos}\n              />\n            );\n          })}\n        </TableBody>\n      </Table>\n    </TableContainer>\n  );\n}\n\nfunction OpenOrdersRow({\n  market,\n  openOrders,\n}: {\n  market: PublicKey;\n  openOrders: Array<OpenOrders>;\n}) {\n  const [ooAccount, setOoAccount] = useState(openOrders[0]);\n  const { swapClient } = useDexContext();\n  const marketClient = useMarket(market);\n  const tokenList = useTokenList();\n  const base = useMint(marketClient?.baseMintAddress);\n  const quote = useMint(marketClient?.quoteMintAddress);\n  const baseWallet = useOwnedTokenAccount(marketClient?.baseMintAddress);\n  const quoteWallet = useOwnedTokenAccount(marketClient?.quoteMintAddress);\n  const baseTicker = tokenList\n    .filter((t) => t.address === marketClient?.baseMintAddress.toString())\n    .map((t) => t.symbol)[0];\n  const quoteTicker = tokenList\n    .filter((t) => t.address === marketClient?.quoteMintAddress.toString())\n    .map((t) => t.symbol)[0];\n  const marketName =\n    baseTicker && quoteTicker\n      ? `${baseTicker} / ${quoteTicker}`\n      : market.toString();\n  const settleDisabled =\n    ooAccount.baseTokenFree.toNumber() + ooAccount.quoteTokenFree.toNumber() ===\n    0;\n  const closeDisabled =\n    ooAccount.baseTokenTotal.toNumber() +\n      ooAccount.quoteTokenTotal.toNumber() !==\n    0;\n\n  const settleFunds = async () => {\n    if (!marketClient) {\n      throw new Error(\"Market client not found\");\n    }\n    if (!baseWallet || !quoteWallet) {\n      throw new Error(\"Base or quote wallet not found\");\n    }\n    const referrerWallet = undefined;\n    const { transaction, signers } =\n      await marketClient.makeSettleFundsTransaction(\n        swapClient.program.provider.connection,\n        ooAccount,\n        baseWallet.publicKey,\n        quoteWallet.publicKey,\n        referrerWallet\n      );\n    await swapClient.program.provider.send(transaction, signers);\n  };\n\n  const closeOpenOrders = async () => {\n    // TODO.\n    //\n    // Blocked by https://github.com/project-serum/serum-dex/pull/112.\n  };\n\n  return (\n    <TableRow key={market.toString()}>\n      <TableCell component=\"th\" scope=\"row\">\n        <Typography>\n          <Link\n            href={`https://dex.projectserum.com/#/market/${market.toString()}`}\n            target=\"_blank\"\n            rel=\"noopener\"\n          >\n            {marketName}\n          </Link>\n        </Typography>\n      </TableCell>\n      <TableCell align=\"center\">\n        <Select\n          value={ooAccount.address.toString()}\n          onChange={(e) =>\n            setOoAccount(\n              openOrders.filter(\n                (oo) => oo.address.toString() === e.target.value\n              )[0]\n            )\n          }\n        >\n          {openOrders.map((oo) => {\n            return (\n              <MenuItem\n                key={oo.address.toString()}\n                value={oo.address.toString()}\n              >\n                {oo.address.toString()}\n              </MenuItem>\n            );\n          })}\n        </Select>\n      </TableCell>\n      <TableCell align=\"center\">\n        {toDisplay(base, ooAccount.baseTokenTotal.sub(ooAccount.baseTokenFree))}\n      </TableCell>\n      <TableCell align=\"center\">\n        {toDisplay(base, ooAccount.baseTokenFree)}\n      </TableCell>\n      <TableCell align=\"center\">\n        {toDisplay(\n          quote,\n          ooAccount.quoteTokenTotal.sub(ooAccount.quoteTokenFree)\n        )}\n      </TableCell>\n      <TableCell align=\"center\">\n        {toDisplay(quote, ooAccount.quoteTokenFree)}\n      </TableCell>\n      <TableCell align=\"center\">\n        <Button color=\"primary\" disabled={settleDisabled} onClick={settleFunds}>\n          Settle\n        </Button>\n      </TableCell>\n      <TableCell align=\"center\">\n        <Button\n          color=\"secondary\"\n          disabled={closeDisabled}\n          onClick={closeOpenOrders}\n        >\n          Close\n        </Button>\n      </TableCell>\n    </TableRow>\n  );\n}\n\nfunction toDisplay(mintInfo: MintInfo | undefined | null, value: BN): string {\n  if (!mintInfo) {\n    return value.toNumber().toString();\n  }\n  return (value.toNumber() / 10 ** mintInfo.decimals).toFixed(\n    mintInfo.decimals\n  );\n}\n","import {\n  makeStyles,\n  Typography,\n  Link,\n  Popover,\n  IconButton,\n} from \"@material-ui/core\";\nimport { Info } from \"@material-ui/icons\";\nimport PopupState, { bindTrigger, bindPopover } from \"material-ui-popup-state\";\nimport { PublicKey } from \"@solana/web3.js\";\nimport { useTokenList } from \"./context/TokenList\";\nimport { useSwapContext, useSwapFair } from \"./context/Swap\";\nimport { useMint } from \"./context/Mint\";\nimport { useDexContext, useMarketName, useFair } from \"./context/Dex\";\n\nconst useStyles = makeStyles((theme) => ({\n  infoLabel: {\n    marginTop: \"10px\",\n    marginBottom: \"10px\",\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    marginLeft: \"5px\",\n    marginRight: \"5px\",\n  },\n  fairPriceLabel: {\n    marginRight: \"10px\",\n    display: \"flex\",\n    justifyContent: \"center\",\n    flexDirection: \"column\",\n    color: theme.palette.text.secondary,\n  },\n  infoButton: {\n    padding: 0,\n  },\n}));\n\nexport function InfoLabel() {\n  const styles = useStyles();\n\n  const { fromMint, toMint } = useSwapContext();\n  const fromMintInfo = useMint(fromMint);\n  const fair = useSwapFair();\n\n  const tokenList = useTokenList();\n  let fromTokenInfo = tokenList.filter(\n    (t) => t.address === fromMint.toString()\n  )[0];\n  let toTokenInfo = tokenList.filter((t) => t.address === toMint.toString())[0];\n\n  return (\n    <div className={styles.infoLabel}>\n      <Typography color=\"textSecondary\"></Typography>\n      <div style={{ display: \"flex\" }}>\n        <div className={styles.fairPriceLabel}>\n          {fair !== undefined\n            ? `1 ${toTokenInfo.symbol} = ${fair.toFixed(\n                fromMintInfo?.decimals\n              )} ${fromTokenInfo.symbol}`\n            : `-`}\n        </div>\n        <InfoButton />\n      </div>\n    </div>\n  );\n}\n\nfunction InfoButton() {\n  const styles = useStyles();\n  return (\n    <PopupState variant=\"popover\">\n      {\n        //@ts-ignore\n        (popupState) => (\n          <div style={{ display: \"flex\" }}>\n            <IconButton\n              {...bindTrigger(popupState)}\n              className={styles.infoButton}\n            >\n              <Info />\n            </IconButton>\n            <Popover\n              {...bindPopover(popupState)}\n              anchorOrigin={{\n                vertical: \"bottom\",\n                horizontal: \"left\",\n              }}\n              transformOrigin={{\n                vertical: \"top\",\n                horizontal: \"right\",\n              }}\n              PaperProps={{ style: { borderRadius: \"10px\" } }}\n              disableRestoreFocus\n            >\n              <InfoDetails />\n            </Popover>\n          </div>\n        )\n      }\n    </PopupState>\n  );\n}\n\nfunction InfoDetails() {\n  const { fromMint, toMint } = useSwapContext();\n  const { swapClient } = useDexContext();\n  const tokenList = useTokenList();\n  const fromMintTicker = tokenList\n    .filter((t) => t.address === fromMint.toString())\n    .map((t) => t.symbol)[0];\n  const toMintTicker = tokenList\n    .filter((t) => t.address === toMint.toString())\n    .map((t) => t.symbol)[0];\n  const addresses = [\n    { ticker: fromMintTicker, mint: fromMint },\n    { ticker: toMintTicker, mint: toMint },\n  ];\n  return (\n    <div style={{ padding: \"15px\", width: \"250px\" }}>\n      <div>\n        <Typography\n          color=\"textSecondary\"\n          style={{ fontWeight: \"bold\", marginBottom: \"5px\" }}\n        >\n          Trade Route\n        </Typography>\n        {swapClient.route(fromMint, toMint).map((market: PublicKey) => {\n          return <MarketRoute key={market.toString()} market={market} />;\n        })}\n      </div>\n      <div style={{ marginTop: \"15px\" }}>\n        <Typography\n          color=\"textSecondary\"\n          style={{ fontWeight: \"bold\", marginBottom: \"5px\" }}\n        >\n          Tokens\n        </Typography>\n        {addresses.map((address) => {\n          return (\n            <div\n              key={address.mint.toString()}\n              style={{\n                marginTop: \"5px\",\n                display: \"flex\",\n                justifyContent: \"space-between\",\n              }}\n            >\n              <Link\n                href={`https://explorer.solana.com/address/${address.mint.toString()}`}\n                target=\"_blank\"\n                rel=\"noopener\"\n              >\n                {address.ticker}\n              </Link>\n              <code style={{ width: \"128px\", overflow: \"hidden\" }}>\n                {address.mint.toString()}\n              </code>\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n}\n\nfunction MarketRoute({ market }: { market: PublicKey }) {\n  const marketName = useMarketName(market);\n  const fair = useFair(market);\n  return (\n    <div\n      style={{\n        display: \"flex\",\n        justifyContent: \"space-between\",\n        marginTop: \"5px\",\n      }}\n    >\n      <Link\n        href={`https://dex.projectserum.com/#/market/${market.toString()}`}\n        target=\"_blank\"\n        rel=\"noopener\"\n      >\n        {marketName}\n      </Link>\n      <code style={{ marginLeft: \"10px\" }}>{fair ? fair.toFixed(6) : \"-\"}</code>\n    </div>\n  );\n}\n","import { useState } from \"react\";\nimport { PublicKey } from \"@solana/web3.js\";\nimport { TokenListContainer } from \"@solana/spl-token-registry\";\nimport { BN, Provider } from \"@project-serum/anchor\";\nimport { Swap as SwapClient } from \"@project-serum/swap\";\nimport {\n  makeStyles,\n  Card,\n  Button,\n  Paper,\n  Typography,\n  TextField,\n} from \"@material-ui/core\";\nimport { ExpandMore } from \"@material-ui/icons\";\nimport { SwapContextProvider, useSwapContext } from \"./context/Swap\";\nimport {\n  DexContextProvider,\n  useDexContext,\n  useOpenOrders,\n  useRoute,\n  useMarket,\n} from \"./context/Dex\";\nimport { MintContextProvider, useMint } from \"./context/Mint\";\nimport { TokenListContextProvider, useTokenList } from \"./context/TokenList\";\nimport { TokenContextProvider, useOwnedTokenAccount } from \"./context/Token\";\nimport TokenDialog from \"./TokenDialog\";\nimport { SettingsButton } from \"./Settings\";\nimport { InfoLabel } from \"./Info\";\n\nconst useStyles = makeStyles(() => ({\n  card: {\n    width: \"450px\",\n    borderRadius: \"10px\",\n    border: \"solid 1pt #e0e0e0\",\n  },\n  cardContent: {\n    marginLeft: \"6px\",\n    marginRight: \"6px\",\n    marginBottom: \"6px\",\n  },\n  tab: {\n    width: \"50%\",\n  },\n  settingsButton: {\n    padding: 0,\n  },\n  swapButton: {\n    width: \"100%\",\n    borderRadius: \"15px\",\n  },\n  swapToFromButton: {\n    display: \"block\",\n    marginLeft: \"auto\",\n    marginRight: \"auto\",\n  },\n}));\n\nexport default function Swap({\n  style,\n  provider,\n  tokenList,\n}: {\n  style?: any;\n  provider: Provider;\n  tokenList: TokenListContainer;\n}) {\n  const swapClient = new SwapClient(provider, tokenList);\n  return (\n    <TokenListContextProvider tokenList={tokenList}>\n      <MintContextProvider provider={provider}>\n        <TokenContextProvider provider={provider}>\n          <DexContextProvider swapClient={swapClient}>\n            <SwapContextProvider>\n              <SwapCard style={style} />\n            </SwapContextProvider>\n          </DexContextProvider>\n        </TokenContextProvider>\n      </MintContextProvider>\n    </TokenListContextProvider>\n  );\n}\n\nfunction SwapCard({ style }: { style?: any }) {\n  const styles = useStyles();\n  return (\n    <div style={style}>\n      <Card className={styles.card}>\n        <SwapHeader />\n        <div className={styles.cardContent}>\n          <SwapFromForm />\n          <ArrowButton />\n          <SwapToForm />\n          <InfoLabel />\n          <SwapButton />\n        </div>\n      </Card>\n    </div>\n  );\n}\n\nfunction SwapHeader() {\n  return (\n    <div\n      style={{\n        display: \"flex\",\n        justifyContent: \"space-between\",\n        margin: \"8px\",\n      }}\n    >\n      <Typography\n        style={{\n          fontWeight: \"bold\",\n          display: \"flex\",\n          justifyContent: \"center\",\n          flexDirection: \"column\",\n        }}\n      >\n        Swap\n      </Typography>\n      <SettingsButton />\n    </div>\n  );\n}\n\nexport function ArrowButton() {\n  const styles = useStyles();\n  const { swapToFromMints } = useSwapContext();\n  return (\n    <Button className={styles.swapToFromButton} onClick={swapToFromMints}>\n      \n    </Button>\n  );\n}\n\nfunction SwapFromForm() {\n  const { fromMint, setFromMint, fromAmount, setFromAmount } = useSwapContext();\n  return (\n    <SwapTokenForm\n      mint={fromMint}\n      setMint={setFromMint}\n      amount={fromAmount}\n      setAmount={setFromAmount}\n    />\n  );\n}\n\nfunction SwapToForm() {\n  const { toMint, setToMint, toAmount, setToAmount } = useSwapContext();\n  return (\n    <SwapTokenForm\n      mint={toMint}\n      setMint={setToMint}\n      amount={toAmount}\n      setAmount={setToAmount}\n    />\n  );\n}\n\nfunction SwapTokenForm({\n  mint,\n  setMint,\n  amount,\n  setAmount,\n}: {\n  mint: PublicKey;\n  setMint: (m: PublicKey) => void;\n  amount: number;\n  setAmount: (a: number) => void;\n}) {\n  const [showTokenDialog, setShowTokenDialog] = useState(false);\n  const tokenAccount = useOwnedTokenAccount(mint);\n  const mintAccount = useMint(mint);\n\n  return (\n    <Paper elevation={0} variant=\"outlined\" style={{ borderRadius: \"10px\" }}>\n      <div\n        style={{\n          height: \"50px\",\n          display: \"flex\",\n          justifyContent: \"space-between\",\n        }}\n      >\n        <TokenButton mint={mint} onClick={() => setShowTokenDialog(true)} />\n        <TextField\n          type=\"number\"\n          value={amount}\n          onChange={(e) => setAmount(parseFloat(e.target.value))}\n          style={{\n            display: \"flex\",\n            justifyContent: \"center\",\n            flexDirection: \"column\",\n          }}\n        />\n      </div>\n      <div style={{ marginLeft: \"10px\", height: \"30px\" }}>\n        <Typography color=\"textSecondary\" style={{ fontSize: \"14px\" }}>\n          {tokenAccount && mintAccount\n            ? `Balance: ${(\n                tokenAccount.account.amount.toNumber() /\n                10 ** mintAccount.decimals\n              ).toFixed(mintAccount.decimals)}`\n            : `-`}\n        </Typography>\n      </div>\n      <TokenDialog\n        setMint={setMint}\n        open={showTokenDialog}\n        onClose={() => setShowTokenDialog(false)}\n      />\n    </Paper>\n  );\n}\n\nfunction TokenButton({\n  mint,\n  onClick,\n}: {\n  mint: PublicKey;\n  onClick: () => void;\n}) {\n  return (\n    <Button onClick={onClick} style={{ width: \"116px\" }}>\n      <TokenIcon mint={mint} style={{ width: \"25px\", borderRadius: \"13px\" }} />\n      <TokenName mint={mint} />\n      <ExpandMore />\n    </Button>\n  );\n}\n\nexport function TokenIcon({ mint, style }: { mint: PublicKey; style: any }) {\n  const tokenList = useTokenList();\n  let tokenInfo = tokenList.filter((t) => t.address === mint.toString())[0];\n  return (\n    <div\n      style={{\n        display: \"flex\",\n        justifyContent: \"center\",\n        flexDirection: \"column\",\n      }}\n    >\n      {tokenInfo.logoURI ? (\n        <img alt=\"token logo\" style={style} src={tokenInfo.logoURI} />\n      ) : (\n        <div style={style}></div>\n      )}\n    </div>\n  );\n}\n\nfunction TokenName({ mint }: { mint: PublicKey }) {\n  const tokenList = useTokenList();\n  let tokenInfo = tokenList.filter((t) => t.address === mint.toString())[0];\n  return (\n    <Typography style={{ marginLeft: \"5px\" }}>{tokenInfo.symbol}</Typography>\n  );\n}\n\nfunction SwapButton() {\n  const styles = useStyles();\n  const { fromMint, toMint, fromAmount, toAmount, slippage, isClosingNewAccounts } = useSwapContext();\n  const { swapClient } = useDexContext();\n  const fromMintInfo = useMint(fromMint);\n  const toMintInfo = useMint(toMint);\n  const openOrders = useOpenOrders();\n  const route = useRoute(fromMint, toMint);\n  const fromMarket = useMarket(route[0]);\n  const toMarket = useMarket(route[1]);\n\n  const sendSwapTransaction = async () => {\n    if (!fromMintInfo || !toMintInfo) {\n      throw new Error(\"Unable to calculate mint decimals\");\n    }\n    const amount = new BN(fromAmount).muln(10 ** fromMintInfo.decimals);\n    const minExpectedSwapAmount = new BN(\n      (toAmount * (100 - slippage)) / 100\n    ).muln(10 ** toMintInfo.decimals);\n    const fromOpenOrders = fromMarket\n      ? openOrders.get(fromMarket?.address.toString())\n      : undefined;\n    const toOpenOrders = toMarket\n      ? openOrders.get(toMarket?.address.toString())\n      : undefined;\n    await swapClient.swap({\n      fromMint,\n      toMint,\n      amount,\n      minExpectedSwapAmount,\n      // Pass in the below parameters so that the client doesn't perform\n      // wasteful network requests when we already have the data.\n      fromMarket,\n      toMarket,\n      fromOpenOrders: fromOpenOrders ? fromOpenOrders[0].address : undefined,\n      toOpenOrders: toOpenOrders ? toOpenOrders[0].address : undefined,\n\t\t\t// Auto close newly created open orders accounts.\n\t\t\tclose: isClosingNewAccounts,\n    });\n  };\n  return (\n    <Button\n      variant=\"contained\"\n      className={styles.swapButton}\n      onClick={sendSwapTransaction}\n    >\n      Swap\n    </Button>\n  );\n}\n","// The swap module exports a single `Swap` component that can be embedded into\n// applications.\n\nimport Swap from \"./components/Swap\";\nexport default Swap;\n","import { useState, useEffect } from \"react\";\nimport { SnackbarProvider, useSnackbar } from \"notistack\";\nimport { Button, Typography } from \"@material-ui/core\";\nimport { Provider } from \"@project-serum/anchor\";\n// @ts-ignore\nimport Wallet from \"@project-serum/sol-wallet-adapter\";\nimport {\n  Account,\n  ConfirmOptions,\n  Connection,\n  Transaction,\n  TransactionSignature,\n} from \"@solana/web3.js\";\nimport { TokenListProvider } from \"@solana/spl-token-registry\";\nimport Swap from \"./swap\";\nimport \"./App.css\";\n\n// App illustrating the use of the Swap component.\n//\n// One needs to just provide an Anchor `Provider` and a `TokenListContainer`\n// to the `Swap` component, and then everything else is taken care of.\nfunction App() {\n  return (\n    <div\n      style={{\n        width: \"450px\",\n        marginLeft: \"auto\",\n        marginRight: \"auto\",\n        position: \"absolute\",\n        left: 0,\n        right: 0,\n        top: 0,\n        bottom: 0,\n        display: \"flex\",\n        justifyContent: \"center\",\n        flexDirection: \"column\",\n      }}\n    >\n      <SnackbarProvider maxSnack={5} autoHideDuration={8000}>\n        <AppInner />\n      </SnackbarProvider>\n    </div>\n  );\n}\n\nfunction AppInner() {\n  const { enqueueSnackbar } = useSnackbar();\n  const [params, setParams] = useState<any>(null);\n  const [isConnected, setIsConnected] = useState(false);\n\n  // Create the provider and token list.\n  useEffect(() => {\n    const opts: ConfirmOptions = {\n      preflightCommitment: \"recent\",\n      commitment: \"recent\",\n    };\n    const network = \"https://solana-api.projectserum.com\";\n    const wallet = new Wallet(\"https://www.sollet.io\", network);\n    const connection = new Connection(network, opts.preflightCommitment);\n    const provider = new NotifyingProvider(connection, wallet, opts, (tx) => {\n      enqueueSnackbar(\"Transaction sent\", {\n        variant: \"success\",\n        action: (\n          <Button\n            color=\"inherit\"\n            component=\"a\"\n            target=\"_blank\"\n            rel=\"noopener\"\n            href={`https://explorer.solana.com/tx/${tx}`}\n          >\n            View on Solana Explorer\n          </Button>\n        ),\n      });\n    });\n    new TokenListProvider().resolve().then((tokenList) => {\n      setParams({\n        provider,\n        tokenList,\n      });\n      wallet.connect();\n    });\n  }, [enqueueSnackbar, setParams]);\n\n  // Connect to the wallet.\n  useEffect(() => {\n    if (params !== null) {\n      params.provider.wallet.on(\"connect\", () => {\n        setIsConnected(true);\n      });\n      params.provider.wallet.connect();\n    }\n  }, [params]);\n\n  return isConnected ? (\n    <Swap provider={params.provider} tokenList={params.tokenList} />\n  ) : (\n    <Typography style={{ textAlign: \"center\" }}>Disconnected</Typography>\n  );\n}\n\n// Custom provider to display notifications whenever a transaction is sent.\n//\n// Note that this is an Anchor wallet/network provider--not a React provider,\n// so all transactions will be flowing through here, which allows us to\n// hook in to display all transactions sent from the `Swap` component\n// as notifications in the parent app.\nclass NotifyingProvider extends Provider {\n  // Function to call whenever the provider sends a transaction;\n  private onTransaction: (tx: TransactionSignature) => void;\n\n  constructor(\n    connection: Connection,\n    wallet: Wallet,\n    opts: ConfirmOptions,\n    onTransaction: (tx: TransactionSignature) => void\n  ) {\n    super(connection, wallet, opts);\n    this.onTransaction = onTransaction;\n  }\n\n  async send(\n    tx: Transaction,\n    signers?: Array<Account | undefined>,\n    opts?: ConfirmOptions\n  ): Promise<TransactionSignature> {\n    // A production implementation should handle error notifications as well.\n    const txSig = await super.send(tx, signers, opts);\n    this.onTransaction(txSig);\n    return txSig;\n  }\n}\n\nexport default App;\n","import { ReportHandler } from \"web-vitals\";\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import(\"web-vitals\").then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}